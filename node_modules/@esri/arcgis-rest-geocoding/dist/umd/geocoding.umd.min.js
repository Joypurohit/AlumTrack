/* @preserve
* @esri/arcgis-rest-geocoding - v2.2.1 - Apache-2.0
* Copyright (c) 2017-2019 Esri, Inc.
* Mon Jul 22 2019 08:50:45 GMT-0600 (MDT)
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@esri/arcgis-rest-request")):"function"==typeof define&&define.amd?define(["exports","@esri/arcgis-rest-request"],t):t((e=e||self).arcgisRest=e.arcgisRest||{},e.arcgisRest)}(this,function(e,n){"use strict";var o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/";e.ARCGIS_ONLINE_GEOCODING_URL=s,e.bulkGeocode=function(e){var r=o({endpoint:s,params:{forStorage:!0,addresses:{records:[]}}},e);return e.addresses.forEach(function(e){r.params.addresses.records.push({attributes:e})}),e.authentication||r.endpoint!==s?n.request(n.cleanUrl(r.endpoint)+"/geocodeAddresses",r).then(function(e){if(r.rawResponse)return e;var t=e.spatialReference;return e.locations.forEach(function(e){e.location&&(e.location.spatialReference=t)}),e}):Promise.reject("bulk geocoding using the ArcGIS service requires authentication")},e.geocode=function(r){var e,t={};return"string"==typeof r?(t.params={singleLine:r},e=s):(e=r.endpoint||s,t=n.appendCustomParams(r,["singleLine","address","address2","address3","neighborhood","city","subregion","region","postal","postalExt","countryCode"],{params:o({},r.params)})),n.request(n.cleanUrl(e)+"/findAddressCandidates",t).then(function(e){if("string"!=typeof r&&r.rawResponse)return e;var t=e.spatialReference;return e.candidates.forEach(function(e){e.location.spatialReference=t,e.extent&&(e.extent.spatialReference=t)}),e})},e.getGeocodeService=function(e){var t=e&&e.endpoint||s,r=o({httpMethod:"GET",maxUrlLength:2e3},e);return n.request(t,r)},e.reverseGeocode=function(e,t){var r=o({endpoint:s,params:{}},t);return function(e){return 2===e.length||3===e.length}(e)?r.params.location=e.join():function(e){return void 0!==e.latitude||void 0!==e.lat}(e)?(e.lat&&(r.params.location=e.long+","+e.lat),e.latitude&&(r.params.location=e.longitude+","+e.latitude)):r.params.location=e,n.request(n.cleanUrl(r.endpoint)+"/reverseGeocode",r)},e.suggest=function(e,t){var r=o({endpoint:s,params:{}},t);return r.params.text=e,n.request(n.cleanUrl(r.endpoint)+"/suggest",r)},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=geocoding.umd.min.js.map
